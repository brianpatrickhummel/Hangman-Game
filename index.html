<!doctype html>
<html>
    <head>
        <title></title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
        <!-- Added link to the jQuery Library -->
  		<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  		<!-- Added a link to Bootstrap-->
  		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    </head>
    <body>
       	<div id="game">
      		<p>Press the space bar to start playing</p>
		</div>
		<h1 id="answer"></h1>
		<div id="lettersG"></div>
		<div id="lettersR"></div>
		<div id="guessedLetters"></div>
		<div id="image"></div>
		

		<script type="text/javascript">
			$(document).ready(function(){
				var potentialWords = ["aphex twin", "arvo part", "bassekou kouyate", "curtis mayfield", "dungen", "ennio morricone", "erik satie", "hank williams", "harry nilsson", "johann sebastian bach", "kronos quartet", "kurt vile", "midlake", "nils frahm", "philip glass", "pink floyd", "spoon", "sufjan stevens", "the beatles", "the doors", "the fucking champs", "timber timbre", "townes van zandt", "uncle acid and the deadbeats"];
				var imageLinks = ['assets/images/aphextwin.jpg', 'assets/images/arvo.jpg', 'assets/images/bassekou.jpg', 'assets/images/curtismayfield.jpg', 'assets/images/dungen.jpg', 'assets/images/enniomorricone.jpg', 'assets/images/eriksatie.jpg', 'assets/images/Hank-Williams.jpg', 'assets/images/harrynilsson.jpg', 'assets/images/johannbach.jpg', 'assets/images/KronosQuartet.jpg', 'assets/images/kurtvile.jpg', 'assets/images/midlake.jpg', 'assets/images/nilsfrahm.jpg', 'assets/images/philglass.jpg', 'assets/images/pinkfloyd.jpg', 'assets/images/spoon.jpg', 'assets/images/sufjan.jpg', 'assets/images/thebeatles.jpg', 'assets/images/thedoors.jpg', 'assets/images/thefuckingchamps.jpg', 'assets/images/timber.jpg', 'assets/images/townesvanzandt.jpg', 'assets/images/uncleacid.jpg'];
				var wins = 0
				var losses = 0

				
				// START GAME WITH SPACE BAR    //PROBLEM: this can trigger reset of game at any time
				window.onkeyup = function(event) {
					if (event.keyCode == 32) {   
						var computerWord =  potentialWords[Math.floor(Math.random() * potentialWords.length)];
						// console.log(computerWord);
						var c = potentialWords.indexOf(computerWord); 
						var imageIndex =  (imageLinks[c]);    //variable to pull from image array with same index as computerWord
						var lettersRemaining = (computerWord.length - (computerWord.split(' ').length-1));   //will subtract any spaces from lettersRemaining
						var remainingGuesses = 10 
						var lettersGuessed = [];
						var answerArray = []; 
						// console.log(lettersRemaining);
						// console.log(remainingGuesses);
						// console.log(c);
						function loadPicture () {
							$('#image').html('<img src=' + imageIndex + '>');
						}
						// console.log(imageLinks[c]);
			          	var html = "<p>Guess a letter</p>" +           //basic HTML for game load screen
			          	"<p>wins: " + wins + "</p>" +
			          	"<p>losses: " + losses + "</p>"	          	
						document.querySelector("#game").innerHTML = html;   //loading basic HTML screen
			
						for (var h =0; h < computerWord.length; h++) {      
							if (computerWord.charAt(h) == (" ")) {        //load placeholder underscores onto screen
								answerArray.push (" ");
							}
							else {
								answerArray.push ("_");
							}
						}
						var a = answerArray.join("&nbsp;");
						// console.log(a);
						$("#answer").html(a);			//  display placeholder via HTML
						 
					 	document.onkeyup = function(event) {		//capture keypress	
		    				var userGuess = (event.key).toLowerCase();              //store guess in userGuess variable	
		    				// console.log(userGuess);
		    				// console.log(c);
		    				if (((lettersGuessed.indexOf(userGuess)) !== -1) || ((answerArray.indexOf(userGuess)) !== -1)) {
		    					alert("You already guessed this letter.  Guess again");
		    				}
		    				else {
	    						var j = (computerWord.indexOf(userGuess));
			    				if (j === -1) {
			    					lettersGuessed.push(userGuess);
			    					remainingGuesses--; 
								}
			    				else {
			    					for(var k = 0; k < computerWord.length; k++) {    //can probably eliminate loop 
			    						if (userGuess === computerWord[k]) {
			    							answerArray[k] = userGuess;
			    							lettersRemaining--;  
			    							}
			    						}
			    					}
	    					$('#lettersG').html("<p>Guesses Remaining: </p>" + remainingGuesses);
	    					$('#lettersR').html("<p>Number of unguessed letters: </p>" + lettersRemaining);
	    					$('#guessedLetters').html("<p>Incorrect letters guessed: </p>" + lettersGuessed);
		    				}
		    				// console.log(answerArray);
		    				// console.log(lettersGuessed);
		    				// console.log(lettersRemaining);
		    				// console.log(remainingGuesses);
		    				document.getElementById("answer").innerHTML = (answerArray.join("&nbsp;"));	
		    				if (lettersRemaining == 0) {
		    					loadPicture();
		    					wins++;
		    					$("#answer").html("You have won the game");
		    					$('#lettersG').html("");
	    						$('#lettersR').html("");
	    						$('#guessedLetters').html("");
		    				}
				        }																		
					}
				}	
			});
		</script>
	</body>
</html>





